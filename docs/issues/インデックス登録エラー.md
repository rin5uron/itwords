
# インデックス登録エラー（タグ）

**タグ**: `インデックス登録エラー`  
**用途**: Search Console で「インデックスされていない」「代替ページ」「配信されません」などが出たときの対策・記録をまとめる

---

## タグの意味

「インデックス登録エラー」＝ Google がページを検索結果用の一覧（インデックス）に載せていない・載せ方に問題がある状態。  
canonical の指定ミス、noindex、404、重複URL などが原因になりうる。

---

## このタグがついている issue 一覧

| issue | 内容 |
|-------|------|
| [アドセンス通過後：不合格3URLの対策](./adsense-indexing-fix-2026-01-24.md) | icon.ico / json/ / api/ の不合格対策（trailingSlash・icon リダイレクト） |
| [ドメイン重複による検索エンジン評価分散](./domain-duplication-seo.md) | canonical 未設定・ドメイン重複 |
| [ads.txt 404](./ads-txt-404-resolution.md) | ads.txt が見つからない（サイト審査・インデックスに影響しうる） |
| 本ドキュメント「利用規約ページ」 | canonical が自分自身でなくトップになっていた問題 |

---

## 利用規約ページの「自分自身の canonical」とは？

### どゆこと？（やさしく）

- **canonical** ＝ 「このページの正式なURLはこれです」と Google に伝えるタグ。
- **自分自身の canonical** ＝ 「正式なURLは**このページ自身**」と指定すること。

**何が起きていたか**

- 利用規約ページ（`/terms-of-service`）には、もともと canonical を指定していなかった。
- そのため、親レイアウト（全体共通）の canonical が使われていた → それが **トップページ**（`https://itwords.jp`）だった。
- 結果、Google は「利用規約はトップの別バージョン」と解釈し、**利用規約を検索結果に載せない**扱いになっていた（「代替ページ」「インデックス登録されていない」と表示）。

**やったこと**

- 利用規約ページに **`canonical: 'https://itwords.jp/terms-of-service'`** を追加した。
- これで「このページの正式なURLは利用規約ページ自身」と伝わるので、利用規約が 1 ページとして正しく扱われ、必要に応じてインデックスされるようになる。

**一言**  
「自分自身の canonical」＝ **「このページの本家はこのURL（自分自身）です」と書いて、検索エンジンに正しく認識させる** こと。

---

## コンテンツ不足の可能性がある用語ページ 一覧

Search Console で「該当なし」「インデックスされていない」と出ている用語ページのうち、**テンプレート未準拠・本文が短い**ためコンテンツ不足と判断される可能性があるもの。**対応時は `docs/templates/page-template.tsx` を参照して拡充・テンプレ準拠化を検討**する。

### 一覧（優先度・テンプレ要素・行数）

| # | 用語名 | パス | 行数 | PageSummary | TableOfContents | FAQ表示 | 優先度 | 備考 |
|---|--------|------|------|:------------:|:---------------:|:-------:|--------|------|
| 1 | CVE | `/terms/cve` | 209 | × | × | 構造化のみ | **最優先** | 目次・サマリーなし、行数少 |
| 2 | ホワイトハッカー | `/terms/white-hat-hacker` | 224 | × | × | 構造化のみ | **最優先** | 目次・サマリーなし、行数少 |
| 3 | スタック | `/terms/stack` | 264 | × | × | ○ | **最優先** | 目次・サマリーなし、行数少 |
| 4 | キュー | `/terms/queue` | 274 | × | × | ○ | **最優先** | 目次・サマリーなし、行数少 |
| 5 | Framework | `/terms/framework` | 330 | × | × | ○ | **最優先** | 目次・サマリーなし |
| 6 | ドメイン | `/terms/domain` | 388 | × | × | 構造化のみ | 推奨 | 目次・サマリーなし |
| 7 | ポカヨケ | `/terms/poka-yoke` | 389 | × | × | 構造化のみ | 推奨 | 目次・サマリーなし |
| 8 | ローカルストレージ | `/terms/localstorage` | 346 | × | × | ○ | 推奨 | 目次・サマリーなし |
| 9 | Webhook | `/terms/webhook` | 421 | × | × | ○ | 推奨 | 目次・サマリーなし |
| 10 | Bootstrap | `/terms/bootstrap` | 506 | × | ○ | ○ | 任意 | PageSummary のみ不足 |
| 11 | エクスプロイト | `/terms/exploit` | 282 | × | ○ | ○ | 任意 | PageSummary のみ不足 |
| 12 | ホスティングサービス | `/terms/hosting-service` | 461 | × | ○ | × | 任意 | PageSummary のみ不足 |
| 13 | JSON | `/terms/json` | 408 | × | ○ | ○ | 任意 | PageSummary のみ不足 |
| 14 | サーバー | `/terms/server` | 431 | × | ○ | × | 任意 | PageSummary のみ不足 |
| 15 | SSL/TLS | `/terms/ssl-tls` | 371 | × | ○ | ○ | 任意 | PageSummary のみ不足 |
| 16 | バリデーション | `/terms/validation` | 685 | × | ○ | × | 任意 | PageSummary のみ不足（行数は多め） |

- **PageSummary** … ページ上部の「このページでわかること」リスト（テンプレ必須要素の一つ）
- **TableOfContents** … 目次（テンプレ必須要素の一つ）
- **FAQ表示** … ページ内の FAQ アコーディオン（○＝FAQAccordion あり、構造化のみ＝JSON-LD のみで表示なし）

### テンプレ準拠（コンテンツ不足の可能性は低い）

以下は PageSummary + TableOfContents あり。未インデックスの場合は**内部リンク不足・クロール頻度・公開日数の短さ**などを優先して検討する。

| 用語名 | パス |
|--------|------|
| GitHubワークフロー | `/terms/github-workflow` |
| Cookie | `/terms/cookie` |
| DNS | `/terms/dns` |
| HTML | `/terms/html` |
| IPアドレスとポート番号 | `/terms/ip-address` |
| JavaScript | `/terms/javascript` |

### 対応の目安

1. **最優先（#1〜#5）**  
   PageSummary・TableOfContents を追加し、必要なら「日常生活での実例」「補足」「FAQ表示（FAQAccordion）」を増やす。
2. **推奨（#6〜#9）**  
   同様にテンプレ準拠化と本文の厚みを検討。
3. **任意（#10〜#16）**  
   PageSummary の追加、および必要に応じて本文拡充で品質を上げる。

参照：`docs/templates/page-template.tsx`（ページ構成の流れ・必須セクション・作成日・更新日のルール）

---

## github-workflow などが検査で引っかかる要因（1週間前の検査）

**状況**: github-workflow などはテンプレ準拠だが、1週間前の検査で「該当なし」「インデックスされていない」と出ている。何か問題があるはず。

**判明した問題**

| 要因 | 内容 |
|------|------|
| **トップページからリンクされていない** | `app/page.tsx` の「すべての用語」に **github-workflow** と **bootstrap** のカードが存在しない。 |
| **影響** | トップからリンクされていないページは、クロールの優先度が低くなりやすく、「重要でないページ」と判断されてインデックスされにくい。 |

**対策（実施済み）**

- トップページの「すべての用語」に **GitHubワークフロー** と **Bootstrap** のカードを追加した。
- これでトップからの内部リンクが増え、クロール・インデックスされやすくなる。

**その他の確認ポイント**

- **sitemap.xml** には両方とも登録済み（`sitemap.ts` に記載あり）。
- **canonical** は layout で正しく設定済み（`/terms/github-workflow`, `/terms/bootstrap`）。
- テンプレ準拠ページでまだ引っかかる場合は、**公開からの日数が短い**・**クロール頻度**も要因になりうる。上記の内部リンク追加後、数日〜1週間様子を見て Search Console で再検査する。

---

## 更新履歴

- 2026-01-24: 初版（タグ作成・利用規約ページの canonical 修正を追記）
- 2026-01-24: インデックスされていない用語ページのコンテンツ不足候補をピックアップし、テンプレ検討の優先度を追記
- 2026-01-24: github-workflow などが検査で引っかかる要因を追記（トップページからリンクなし）。対策としてトップに GitHubワークフロー・Bootstrap カードを追加
- 2026-01-24: コンテンツ不足可能性のある用語ページを一覧表に整理（優先度・PageSummary・TableOfContents・FAQ表示・行数・備考）
