# プロセスログ

プロジェクトの重要な作業履歴を時系列で記録します。

---

## 2026-01-12: ヒーロー画像追加とビルドエラー対応

### 実施内容

#### 1. ゼロデイ攻撃・AESページへのヒーロー画像追加

**背景**:
- ユーザーから2枚のヒーロー画像（ChatGPTで生成）が提供された
- 1枚目: ゼロデイ攻撃のイメージ（攻撃者とユーザーの対比）
- 2枚目: AESのイメージ（共通鍵を持つ二人のユーザー）

**実装手順**:

1. **画像の配置**
   ```bash
   # 元画像をtermsディレクトリにコピー
   cp "public/images/ChatGPT Image 2026年1月11日 15_55_06.png" public/images/terms/zero-day-hero.png
   cp "public/images/ChatGPT Image 2026年1月11日 15_55_09.png" public/images/terms/aes-hero.png
   ```

2. **ゼロデイ攻撃ページ (`app/terms/zero-day/page.tsx`)の更新**
   - 既存のヒーロー画像を新しい画像に置き換え
   - 画像サイズ: 1536x1024 (3:2比率)
   - 配置: TermHeaderの直後、mainセクションの前

3. **AESページ (`app/terms/aes/page.tsx`)の更新**
   - `next/image`をインポート
   - OGP/Twitter Cardメタデータを追加
   - ヒーロー画像セクションを追加（ゼロデイ攻撃ページと同様のスタイル）

4. **画像表示スタイル**
   ```tsx
   <div style={{
     width: '100%',
     maxWidth: '900px',
     margin: '2rem auto',
     borderRadius: '12px',
     overflow: 'hidden',
     boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
     maxHeight: '300px'
   }}>
     <Image
       src="/images/terms/[画像名].png"
       alt="..."
       width={1200}
       height={630}
       priority
       style={{
         width: '100%',
         height: '100%',
         objectFit: 'cover',
         objectPosition: 'center',
         display: 'block'
       }}
     />
   </div>
   ```

**コミット**:
```
ゼロデイ攻撃とAESページのヒーロー画像を更新
- ゼロデイ攻撃ページ: 攻撃者とユーザーの対比を表現した新しいヒーロー画像に変更
- AESページ: 共通鍵暗号方式を視覚的に表現したヒーロー画像を追加
- OGP/Twitter Card用のメタデータを更新
```

#### 2. Vercelビルドエラーの対応

**問題1: TypeScriptコンパイルエラー**
```
Type error: Cannot find module './components/GoogleAnalytics'
  at docs/templates/layout-template.tsx:6:29
```

**原因**:
- `docs/templates/`のテンプレートファイルがビルド対象になっていた
- `tsconfig.json`で`docs`ディレクトリが除外されていなかった

**解決**:
```json
// tsconfig.json
"exclude": ["node_modules", "docs"]
```

**問題2: Next.js 15の要件違反**
```
useSearchParams() should be wrapped in a suspense boundary at page "/search"
```

**原因**:
- Next.js 15では`useSearchParams()`をSuspense境界内で使用する必要がある
- `app/search/page.tsx`で直接使用していた

**解決**:
```tsx
// 検索ロジックを別コンポーネントに分離
function SearchResults() {
  const searchParams = useSearchParams()
  // ...検索処理
}

// Suspenseで囲んで使用
export default function SearchPage() {
  return (
    <Suspense fallback={<p>検索中...</p>}>
      <SearchResults />
    </Suspense>
  )
}
```

**コミット**:
```
ビルドエラーを修正
- tsconfig.jsonでdocsディレクトリを除外
- search/page.tsxでuseSearchParams()をSuspenseで囲んで対応
- Next.js 15の要件に準拠
```

### 課題

**画像の見切れ問題**:
- PCでは横長表示になり、画像の上下が見切れる
- 原因: `maxHeight: 300px`固定 + `objectFit: 'cover'`
- 元画像: 1536x1024 (3:2比率)
- 表示: 横幅いっぱい × 高さ300px → アスペクト比が合わない

**対応方針**:
- ユーザーが画像を16:9比率にトリミングして再アップロード予定
- 16:9比率は一般的なアスペクト比で、PCでもスマホでも綺麗に表示される

### 学び

1. **画像のアスペクト比は事前に統一する**
   - デザイン段階で表示領域のアスペクト比を決定
   - 画像生成時に同じ比率で生成するか、トリミングする

2. **Vercelデプロイ前にローカルでビルドチェック**
   - `npm run build`で本番環境と同じチェックを実行
   - 開発サーバーでは検出されないエラーを事前に発見できる

3. **Next.js 15の新要件を把握**
   - `useSearchParams()`などの動的フックは必ずSuspense内で使用
   - クライアントコンポーネントとサーバーコンポーネントの境界を意識

4. **ドキュメント・テンプレートファイルの管理**
   - `tsconfig.json`の`exclude`で明示的に除外
   - ビルド対象とドキュメントを明確に分離

---

## 2026-01-15: SEO大幅強化（ゼロデイ・セキュリティ用語3つ追加・CSS強化・トップページ改善）

### 実施内容

#### 1. ゼロデイ攻撃ページのSEO強化

**背景**:
- Search Consoleで「ゼロデイ攻撃の由来」「ゼロデイの由来」で表示されるがクリックされない
- descriptionが長すぎて訴求力不足

**実装**:
1. **タイトル変更**
   - Before: `ゼロデイ攻撃とは？初心者向けにわかりやすく解説【実践デモ付き】`
   - After: `ゼロデイ攻撃とは？名前の由来から対策まで完全解説【実践デモ付き】`

2. **description最適化**
   - Before: 長文で訴求力なし
   - After: `ゼロデイ攻撃の名前の由来とは？なぜ「0日」と呼ばれるのか、防御が不可能な理由、今すぐできる対策を攻撃者の視点で体験できる実践デモで学べます。初心者にもわかりやすく解説。`

3. **本文に「由来」セクション追加**
   - 「ゼロデイ」の名前の由来を詳しく解説
   - Day 0の概念を視覚化

4. **FAQの順序変更**
   - 「なぜゼロデイと呼ばれるのか？」を最優先に配置

5. **デモコンポーネントを簡潔化**
   - 各ステップの説明文を50文字以上→20文字前後に短縮
   - パッと見で理解できる長さに

**コミット**: `ゼロデイ攻撃ページSEO強化（由来追加、description最適化）`

---

#### 2. セキュリティ関連3用語を新規追加

**背景**:
- ゼロデイ攻撃が人気（40セッション、23.53%）
- セキュリティ分野でニッチかつ需要がある用語を狙う
- 競合が少なく1位を取れる可能性が高い用語を選定

**追加した用語**:

**2-1. エクスプロイト（exploit）**
- **ターゲット**: 「エクスプロイト とは」検索
- **差別化**: SQLインジェクション攻撃のシミュレーションデモ
- **内容**:
  - 脆弱性を悪用する攻撃コードの解説
  - PoCとの違い
  - ゼロデイ攻撃との関係
- **デモ**: 攻撃の流れを4ステップで体験
- **競合**: 少ない（技術的な記事が多く、初心者向けが少ない）

**2-2. ホワイトハッカー**
- **ターゲット**: 「ホワイトハッカー とは」検索
- **差別化**: 脆弱性診断の仕事を体験できるデモ
- **内容**:
  - 西部劇の由来（White Hat vs Black Hat）
  - ブラックハッカー・グレーハッカーとの違い
  - 必要なスキル、なり方
- **デモ**: 脆弱性診断の5ステップを体験
- **競合**: 職業紹介が多く、用語解説が少ない

**2-3. CVE（脆弱性識別番号）**
- **ターゲット**: 「CVE とは」「CVE-2024-xxxxx 意味」検索
- **差別化**: 実際の有名CVE番号を検索できるデモ
- **内容**:
  - Common Vulnerabilities and Exposuresの解説
  - CVE番号の見方（CVE-2024-12345の意味）
  - CVSSスコアの読み方
  - ゼロデイ攻撃との関係
- **デモ**: Log4Shell等の有名CVE番号をクリックして詳細確認
- **競合**: 超少ない（説明サイトがほぼない）

**相互リンク構築**:
- ゼロデイ攻撃 ⇔ エクスプロイト
- ゼロデイ攻撃 ⇔ CVE
- エクスプロイト ⇔ ホワイトハッカー
- CVE ⇔ ホワイトハッカー

**コミット**: `セキュリティ関連3用語を新規追加（エクスプロイト・ホワイトハッカー・CVE）`

---

#### 3. CSSページを大幅強化（SEO1位獲得施策）

**背景**:
- サイト名で検索するとCSSページが一番上に出てくる
- しかしメタデータが存在せず、SEO的に弱い
- 競合が多いため、差別化が必要

**実装**:

**3-1. CSS ON/OFFトグルデモを追加**
- ボタン一つでCSS適用前後を比較
- ビフォー: 白黒の味気ない見た目
- アフター: 色鮮やかで整理された美しいカード
- **衝撃的なビフォーアフター**で「これがCSSの力！」を体感

**3-2. 「CSSの語源・由来」セクション追加**
- Cascading Style Sheetsの意味を解説
- 「カスケード（滝）」の概念を説明
- 検索意図「CSS とは」に完璧対応

**3-3. FAQ追加（5つ）**
- CSSとは何ですか？
- CSSがないとどうなる？
- CSSとHTMLの違いは何ですか？
- CSSが効かない原因は？
- classとidの違いは？
- **構造化データで検索結果に表示されやすく**

**3-4. HTMLとの関係を明確化**
- 「ノートと色ペン」のたとえ話
- 役割の違いを視覚的に説明
- 初心者が一番知りたい情報を最初に

**3-5. 構造化データ追加**
- FAQPage（検索結果に表示される）
- Article（Googleが理解しやすい）

**コミット**: `CSSページを大幅強化（SEO1位獲得施策）`

---

#### 4. トップページ構成を大幅改善

**背景**:
- アクセスデータを分析
  - ゼロデイ攻撃: 40セッション（23.53%）
  - AES: 18セッション（10.59%）
  - ローカルストレージ: 8セッション（4.71%）
- 人気ページが下の方にあり、ユーザーが見つけにくい

**変更内容**:

**構成変更（Before → After）**:
- Before: 新着用語 → 人気の用語 → Web開発の基礎 → 開発ツール
- After: **人気の用語 → 新着用語 → すべての用語**

**人気の用語（最上部に配置）**:
1. ゼロデイ攻撃（40セッション）
2. AES（18セッション）
3. ローカルストレージ（8セッション）
4. API
5. JSON
6. CSS

**新着用語（2番目）**:
- エクスプロイト、ホワイトハッカー、CVE
- バリデーション、ポカヨケ、フールプルーフ

**すべての用語（新設）**:
- 全17用語を一覧表示
- カテゴリごとに整理（Web、データ、ツール、インフラ、セキュリティ）

**ナビゲーション更新**:
- 「すべての用語」リンクを追加

**期待効果**:
- 人気ページが最初に見える → 直帰率低下
- 全用語が一覧できる → 回遊率UP
- UX向上 → 滞在時間増加

**コミット**: `トップページの構成を大幅改善`

---

### 成果

**新規ページ**: 3ページ（エクスプロイト、ホワイトハッカー、CVE）
**強化ページ**: 2ページ（ゼロデイ攻撃、CSS）
**トップページ**: 構成改善

**SEO対策**:
- 競合が少ないニッチキーワードを狙う戦略
- 体験デモで差別化
- 構造化データでリッチリザルト狙い
- 相互リンクで内部SEO強化

**総ページ数**: 17ページ → 20ページ

---

**最終更新**: 2026-01-15
