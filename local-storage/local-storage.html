<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ローカルストレージ - 実践型IT用語辞典</title>
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <!-- Common Stylesheet -->
  <link rel="stylesheet" href="../styles.css">
</head>
<body>

  <div class="container">
    <article class="term-page">
      <header class="term-header">
        <h1><i class="fas fa-database icon"></i>ローカルストレージ</h1>
        <p class="reading">よみかた：<strong>ろーかるすとれーじ</strong></p>
      </header>

      <section class="term-intro">
        <h2>意味</h2>
        <p>
          ブラウザに<strong>小さなデータを保存しておける場所</strong>のこと。<br>
          JavaScriptからアクセスできて、<strong>ページを閉じても情報が残る</strong>のが特徴。
        </p>
      </section>

      <section class="term-point">
        <h2>ポイント</h2>
        <ul>
          <li>ブラウザ内に保存される（サーバーには送られない）</li>
          <li><code>localStorage.setItem()</code> と <code>getItem()</code> で読み書きできる</li>
          <li>文字列しか保存できないため、オブジェクトを保存するには<a href="#">JSON</a>形式への変換が必須</li>
        </ul>
      </section>

      <section class="term-visual">
        <h2>体験してみよう</h2>
        <div class="demo-section">
          <p>ユーザー情報をJSON形式で保存します。</p>
          <input type="text" id="name-input" placeholder="名前" style="width: 40%; padding: 10px; font-size: 1em; margin-bottom: 15px;" value="山田">
          <input type="number" id="age-input" placeholder="年齢" style="width: 30%; padding: 10px; font-size: 1em; margin-bottom: 15px;" value="30">
          <button class="demo-button" onclick="saveData()">保存</button>
          <button class="demo-button" onclick="clearData()" style="background-color: #aaa;">クリア</button>
          <p id="demo-message" style="margin-top: 20px;">保存されたデータ: <span id="saved-data">なし</span></p>
        </div>
      </section>

      <section class="term-code">
        <h2>コードを書いてみよう</h2>
        <p><a href="#">JSON</a>形式に変換することで、オブジェクトや配列のような複雑なデータも<code>localStorage</code>に保存できます。</p>
        <details>
          <summary>サンプルコードを見る (JavaScript)</summary>
          <div class="code-example">
            <pre><code>// ユーザーオブジェクトを作成
const user = {
  name: document.getElementById('name-input').value,
  age: document.getElementById('age-input').value
};

// オブジェクトをJSON文字列に変換して保存
localStorage.setItem('userData', JSON.stringify(user));

// JSON文字列を取得してオブジェクトに変換
const jsonData = localStorage.getItem('userData');
const savedUser = JSON.parse(jsonData);

console.log(savedUser.name); // "山田"
</code></pre>
          </div>
        </details>
        <details>
          <summary>HTML/CSS/JS 統合版テンプレート</summary>
          <p style="padding: 15px 20px 0;">このページの完全なコードです。以下の内容をコピーして<code>index.html</code>などの名前で保存すると、ご自身のPCやブラウザで直接開いて確認できます。</p>
          <div class="code-example">
            <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;ローカルストレージ - 実践型IT用語辞典&lt;/title&gt;
  &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"&gt;
  &lt;style&gt;
    /* ここにstyles.cssの内容をコピー */
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="container"&gt;
    &lt;!-- ここにbodyの内容をコピー --&gt;
  &lt;/div&gt;
  &lt;script&gt;
    // ここにscriptの内容をコピー
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
          </div>
        </details>
      </section>

      <section class="term-comparison">
        <h2>関連用語・比較</h2>
        <div class="comparison-table">
          <table>
            <thead>
              <tr>
                <th>用語名</th>
                <th>特徴</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><a class="term-name" href="">localStorage</a></td>
                <td>ページを閉じても残る、永続的</td>
              </tr>
              <tr>
                <td><a class="term-name" href="">sessionStorage</a></td>
                <td>同じタブ内だけ。閉じると消える</td>
              </tr>
              <tr>
                <td><a class="term-name" href="">クッキー</a></td>
                <td>サーバーにも送れる、小さい、やや古い</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <footer class="term-footer">
        <nav class="footer-nav">
          <p><a href="../index.html">トップページへ戻る</a></p>
        </nav>
      </footer>
    </article>
  </div>

  <script>
    const nameInput = document.getElementById('name-input');
    const ageInput = document.getElementById('age-input');
    const savedDataSpan = document.getElementById('saved-data');

    function saveData() {
      const user = {
        name: nameInput.value,
        age: ageInput.value
      };
      // オブジェクトをJSON文字列に変換して保存
      localStorage.setItem('userData', JSON.stringify(user));
      displayData();
    }

    function displayData() {
      // JSON文字列を取得
      const jsonData = localStorage.getItem('userData');
      if (jsonData) {
        // JSON文字列をオブジェクトにパース
        const user = JSON.parse(jsonData);
        savedDataSpan.textContent = `名前: ${user.name}, 年齢: ${user.age}`;
      } else {
        savedDataSpan.textContent = 'なし';
      }
    }

    function clearData() {
      localStorage.removeItem('userData');
      nameInput.value = '山田';
      ageInput.value = '30';
      displayData();
    }

    // ページ読み込み時に保存されたデータを表示
    window.onload = displayData;
  </script>

</body>
</html>